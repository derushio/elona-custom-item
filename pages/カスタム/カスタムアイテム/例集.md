# 例集

## 例1）MMA系では下記のように設定すれば交易品が作成可能

```
reftype. "92000"
reftypeminor."99999"

ieffect. "0"
isub1. "6"
isub2. "0"
isub3. "0"
ieffectは"0"を必ず指定
isub1は交易品種別(0:海産物、1:玩具、2:酒類、3:墓、4:楽器、5:船具、6:北国物、7:芸術品)の範囲から選択
各都市で設定されている相場に応じて価格が変動する
通常、交易品だ、と表示される部分に素材や作者名が表示されるという違いはあるが、交易店で取り扱えるようになり
ifilterref.で制限をかけていなければ店売りもされるようになるoo系での作成は非推奨
MMA系で作成したものをoo系に持ち込んだ場合は荷車として売却可能
同じアイテムをoo系で新規作成した場合、荷車扱いではあるが交易店では売買できないアイテムとなった
```

## 例2）カスタム鉱石

```
下記のように設定すれば作成可能
reftype.    "77000"
reftypeminor.    "77001"
通常の鉱石と同様、壁を掘れば出現するし、ペットが拾ったり売却したりする
givegod.で指定しなければ神に捧げられないし複数指定は不可(オパートス様とジュア様の両方に捧げられる鉱石は作れない)
既存鉱石の価格などは本家wikiのオブジェクトページ参照　　　
```

## 例3）カスタム樹木

```
下記のように設定すれば作成可能
objlv.	"1"
reftype.	"80000"
reftypeminor.	"99999"
objlv.(最低生成階層)を1にすれば討伐依頼も含めた屋外マップで自然生成されるようになる拾えないが盗むことはできる
落葉樹だ、のような説明文は載らないので好きな草花を生やすために使ってもよい果実の木は作成不可
荒野や砂漠マップなどの特殊な(例えば枯れ木しか生成されないような)マップには生えない
```

## 例4）カスタムポーション

```
従来のカスタムアイテムは飲むことができないがoomSEではカスタムポーションが作成可能
他にもいろいろ制限が撤廃されているが取り扱いには注意
詳しくはoomSEのreadme内を飲める、で検索
```

## 例5) カスタム食べ物

```
元々カスタムアイテムは食べ物を作るための仕様が整っていないため扱いにくい
ヴァリアントごとに仕様も異なる
omakeの段階ではisubに入力した値は反映されない
fixenc.設定可
基本的には旅糧か(ペットも含めた)NPC用能動的にPCが食べることはできない
食べ物カテゴリであればreftypeminorやmaterial不問で食べる
reftype. "57000"
調理前、調理後で画像は変わらない
条件によっては床置きで透明化するが色補正を0以外にすれば解決する
冷蔵庫やクーラーボックスに格納可能
※以下、MMAh(20180721版)での調査結果
-
下記のように設定すればMMAhでは調理済みの生ものの食べ物が作成可能
この例の場合は動物のこんがり肉に近いものになる
reftype. "57000"
reftypeminor. "99999"
material. "35"

inameonly. "1"
ieffect. "0"
isub1. "1000"
isub2. "3"
isub3. "72"

icolref. "12"

isub1を0以外にした場合はinameonlyを1にしておく
isub2を0にしたものは調理できる調理後は付帯情報2と3が変化する
isub1～3が全て0のアイテムは調理しない限り腐らない
isub1
サブカテゴリの指定
本家wikiの解析/料理・食事効果/料理リストの識別子参照下記の表でも一部参考
inameonly. "0"とした場合、isub1に入れた数値とisub2の設定次第でカスタムアイテムの名称が変化する
識別子	分類	備考
0		調理前・調理後で名前が変わらない
調理させたくないならば最初から調理済みとなるようにisub2.を0以外にしておけばよい
1000	肉	素材名はつかない通常の死体を料理した時と同じ名前変化「動物コロッケ」
2000	野菜	調理するとカルネアデスの板料理になる
例えば炒め物ができた場合、「カルネアデスの板の炒め物」に名前が変わる
3000	果物	調理するとカルネアデスの板料理になる
4000	アピの実	調理するとカルネアデスの板料理になる
5000	麺	素材名はつかない通常の麺を料理した時と同じ名前変化「ミートスパゲティ」
6000	魚	調理するとカルネアデスの板料理になる
7000	パン	素材名はつかない通常の小麦粉を料理した時と同じ名前変化「カレーパン」
8000	卵	素材名はつかない通常の鳥の卵を料理した時と同じ名前変化「鳥の卵入りスープ」
isub2.を0とすれば調理前の食べ物となるが、isub1.が0であれば調理しても名前は変わらない
いずれの場合もinameonly. "1"としておけば料理名が自動で付かない代わりに、おかしな名前にもならなくなる
(omakeではisubがうまく働かないisub2が0以外でも調理可能でありinameonlyの設定値に関わらず名前も変化しなくなる)
isub1.isub2.いずれも0のアイテムは調理後chipidが0になる色補正0の場合インベントリ外で透明化する
icolorefを12にすると色補正は加えないままこの問題が解決できる
isub2
料理ランクの指定
0 調理前
1～9　調理済みアイテム数字が大きいほど上質
isub2を0としたアイテムをゲーム内で調理すると付帯情報2の値が通常の食べ物同様変化する
口調を変えるで設定していれば既存の料理同様、ランクに応じてペットの反応も変わる
ランク別の満腹度・経験値補正に関しては未検証
従来の補正値情報は上の項目で紹介したリンク先の、料理リストの下に掲載されている
isub3
消費期限の指定
既存の食べ物の付帯情報3は下記のように設定されている(Elona valiant wiki の解析情報より参考)
(年 * 24 * 30 * 12 + 月 * 24 * 30 + 日 * 24 + 時)-720
現在日時がこれを過ぎていると-1に変化し、"腐った"の形容が付く
例えば529年2月18日5時に腐る食べ物の付帯情報3は4570560+1440+432+5=4572437
material.を35(生もの)にしてisub3を0以外にした場合、消費期限を超えれば値が-1に代わり腐る
isub1を0とした場合、カスタムアイテム作成用テキストのisub3に入れた数字が付帯情報3の部分に直接反映される
isub1もisub2も0のアイテムはisub3に半端な数字を入れると即腐るため、isub3の値も0としておいたほうがよい
isub3が0であれば未調理の間は腐らない
isub1を0以外とした場合、ゲーム内では現在時刻にあたる数値が足された状態で生成されるので自分で 計算する必要はない
3時間後に腐るアイテムならisub3を3にしておけばよい
isub2を0とした場合、isub3がいかなる数字であっても、腐る前に調理すれば自動で消費期限が3日後に変わる
MMAhの場合設定で消費期限表示を有効にしていてもカスタムアイテムの消費期限は表示されない
```

---

## 参考元
* http://elona-omakefamily-wiki.com/?:カスタム/カスタムアイテム
