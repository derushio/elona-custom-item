<!-- TODO: 文章から機能説明を取り出し列挙する形式に変換する -->
# カスタムテキスト
## カスタムテキストの種類
### 言葉を教える
* ペットやNPCが、何もしていないときに発するメッセージ(妹の「お兄ちゃん」「お姉ちゃん」など)を追加する機能です。
* NPC1体につき1つの言葉を覚えさせることが出来ます(前に教えた言葉は上書きされる)。教えた言葉を消去するには、空文字列を教えます。
* 文字の色は標準では水色ですが、メッセージ中に"「"が含まれているとセリフと見なされて黄色になります。
* なお、本機能と、Ver.1.16reloadedで追加されたカスタム口調は排他利用となり、両方を1つのキャラに覚えさせることは出来ません。

### 口調
#### 口調を変える
* 干渉メニューから実行できる、対象キャラの台詞をそれが書かれたtxtファイルの内容に変更できる機能です。
* 口調ファイルをelona/user/talk のフォルダに用意後、ゲーム「i」キーから対象を指定して干渉メニューを開き、「口調を変える」を選択すると口調を変更することができる。
* elona1.22においてomake用に書かれたテキストを使うと、omake用に書かれた部分は発言されません。
* また一度口調を設定すると、その後で口調テキストを改訂した場合に再度設定しなおす必要はありません。

#### CNPCの会話文テキスト
* CNPCを定義するtxtファイル内の会話文部分(%txt～%endtxt)です。作った後に書き直せないこと以外は基本的に「口調を変える」にて用いられるテキストの扱いに準じますが、こちらはCNPCファイルの読み込みの際に読み込まれる会話文に上限があり、それは下記の「CNPCファイルにおける会話文記述の読み込み制限」の通りです。
* 「口調を変える」側には制限がないので、自分用のCNPCであり、体裁を気にしないというのであれば、CNPCを作ったあとで口調を設定することでたくさん会話するCNPCを実現するというのも手です。

##### CNPCファイルにおける会話文記述の読み込み制限
<div class='bg-gray indent nl'>
CNPCファイルにはキャラクターの情報を記述する部分の下に、そのキャラクターの会話文を書くスペースがありますが、この会話文(%txt～%endTxtまで)は一定の容量までしか読み込まれないようになっています。具体的には公式及び互換ヴァリアントが8kバイト、omake系ヴァリアントが16kバイトまでしか読み込まれないようです(MMA/TTは暫定的に32kバイトまで拡張)。user/talkフォルダ内において口調ファイルとして運用する分には制限がなく、今まで通りの運用で問題ありませんが、互換性を意識したCNPCファイル作成の場合には以下のようにすると良いです。
</div>

* 会話部分を公式準拠(及び他のヴァリアント?)の場合は8kバイト、omake系は16kバイト、MMA/TTは32kバイトとする。
* 区切りの線や説明文などを削ってみる。
* テキスト内のタグの順序を読み込み容量に従い、公式準拠→omake以外のヴァリアント→omake→MMA/TT関連とする。(容量が足りるならば特に必要はない。)

#### c_talk (omake系)
* 「口調を変える」と同じく elona/user/talk フォルダに「ctalkX_Y.txt」(Xがキャラの識別番号*4、Yが0なら男性、1なら女性)というtxtファイルを作り、そのファイルに文章を記述すれば、性別がYのXのキャラに記述した文章を発言させられるという機能です。別に性別ごとに会話内容を変える「ctalkgender_Y.txt」という機能もあります。
* ただしこれを用いると該当のキャラ全ての台詞を変えてしまうことになり、ログがやたらと埋まったり、同じ台詞があふれて大変、となることもありうるので使い道に注意が必要です。
* なお記述の仕方は「口調を変える」のものと同等です。

---

## 引用元
* https://wikiwiki.jp/elonatxt/テキスト作成と利用の手引き（FAQ）
